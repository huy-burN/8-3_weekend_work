# main.py
import openai
from minimize import get_minimized_result

# Đặt API key của bạn
openai.api_key = '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'

def chat_with_gpt(prompt):
    try:
        response = openai.ChatCompletion.create(
            model="gpt-4",
            messages=[
                {"role": "user", "content": prompt}
            ]
        )
        return response.choices[0].message.content
    except Exception as e:
        return f"Có lỗi xảy ra: {str(e)}"

def main():
    # Lấy kết quả từ file minimize
    user_input = get_minimized_result()
    
    # Gửi kết quả tới ChatGPT
    response = chat_with_gpt(user_input)
    print("Input từ minimize:", user_input)
    print("ChatGPT:", response)

if __name__ == "__main__":
    main()